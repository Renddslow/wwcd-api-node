const express = require('express');

const jsonApiWrapper = require('app/utils/jsonApiWrapper');
const prizesController = require('app/controllers/prizes');
const authenticationController = require('app/controllers/authentication');

module.exports = (service) => {
  const router = express.Router();

  const prizes = prizesController(service);
  const auth = authenticationController(service);

  router.post('/authenticate', jsonApiWrapper(auth.authenticateUser)('token'));

  router.get('/prizes', jsonApiWrapper(prizes.getAll)('prize'));
  router.get('/users/me', auth.authMiddleware, jsonApiWrapper(() => ({ id: 12 }))('user'));

  return router;
};
